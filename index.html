


import React, { useState, useEffect } from 'react';
import Head from 'next/head';
import Web3 from 'web3';

const ETHEREUM_ADDRESS = '0x0000000000000000000000000000000000000000'; // Dirección de Ethereum para donaciones
const BITCOIN_ADDRESS = 'bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf5mdq'; // Dirección de Bitcoin para donaciones

function HomePage() {
  const [ethereumAddress, setEthereumAddress] = useState('');
  const [bitcoinAddress, setBitcoinAddress] = useState('');
  const [ethereumDonationAmount, setEthereumDonationAmount] = useState('');
  const [bitcoinDonationAmount, setBitcoinDonationAmount] = useState('');
  const [ethereumBalance, setEthereumBalance] = useState('');
  const [bitcoinBalance, setBitcoinBalance] = useState('');

  useEffect(() => {
    async function loadBalances() {
      // Conectar con la red Ethereum
      const web3 = new Web3(Web3.givenProvider || 'https://mainnet.infura.io/v3/YOUR_PROJECT_ID');

      // Obtener balance de la dirección de Ethereum
      const balance = await web3.eth.getBalance(ETHEREUM_ADDRESS);
      setEthereumBalance(web3.utils.fromWei(balance, 'ether'));

      // Obtener balance de la dirección de Bitcoin
      const response = await fetch(`https://blockchain.info/balance?active=${BITCOIN_ADDRESS}`);
      const data = await response.json();
      setBitcoinBalance(data[BITCOIN_ADDRESS].final_balance / 100000000);
    }

    loadBalances();
  }, []);

  async function handleEthereumDonate() {
    // Conectar con la red Ethereum
    const web3 = new Web3(Web3.givenProvider || 'https://mainnet.infura.io/v3/YOUR_PROJECT_ID');

    // Verificar si el usuario tiene una billetera Ethereum conectada
    if (typeof window.ethereum === 'undefined') {
      alert('No se encontró una billetera Ethereum conectada. Por favor conecte una billetera y vuelva a intentarlo.');
      return;
    }

    // Obtener la dirección Ethereum del usuario
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    setEthereumAddress(accounts[0]);

    // Enviar la donación en Ethereum
    await web3.eth.sendTransaction({
      from: accounts[0],
      to: ETHEREUM_ADDRESS,
      value: web3.utils.toWei(ethereumDonationAmount, 'ether'),
    });

    // Actualizar balance de Ethereum
    const balance = await web3.eth.getBalance(ETHEREUM_ADDRESS);
    setEthereumBalance(web3.utils.fromWei(balance, 'ether'));
    setEthereumDonationAmount('');
  }

  function handleBitcoinDonate() {
    // Redirigir al usuario a la página de donación en Bitcoin
    window.location.href = `bitcoin:${BITCOIN_ADDRESS}?amount=${bitcoinDonationAmount}`;
    setBitcoinDonationAmount('');
  }

  return (
    <>
      <Head>
        <title>Donaciones en Ethereum y Bitcoin</title>
      </Head>
      <h1>¡Haz una donación!</h1>
      <p>Puedes donar en las siguientes criptomonedas:</p
