<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Donaciones en Ethereum y Bitcoin</title>
  </head>
  <body>
    <div id="root"></div>

    <script src="https://cdn.jsdelivr.net/npm/react@17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/next/dist/shared/lib/head.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>

    <script type="text/babel">
      const ETHEREUM_ADDRESS = '0x0000000000000000000000000000000000000000'; // Dirección de Ethereum para donaciones
      const BITCOIN_ADDRESS = 'bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf5mdq'; // Dirección de Bitcoin para donaciones

      function HomePage() {
        const [ethBalance, setEthBalance] = useState(0);
        const [btcBalance, setBtcBalance] = useState(0);

        useEffect(() => {
          // Conexión a la red Ethereum utilizando Web3.js
          if (typeof window.ethereum !== 'undefined') {
            const web3 = new Web3(window.ethereum);

            // Habilitar la conexión a la red Ethereum por parte del usuario
            window.ethereum.enable().then(() => {
              // Obtener la cuenta activa del usuario
              web3.eth.getAccounts().then((accounts) => {
                const account = accounts[0];

                // Obtener el saldo de ETH de la dirección de donación
                web3.eth.getBalance(ETHEREUM_ADDRESS).then((balance) => {
                  setEthBalance(web3.utils.fromWei(balance, 'ether'));

                  // Obtener el saldo de BTC de la dirección de donación
                  fetch(`https://blockchain.info/q/addressbalance/${BITCOIN_ADDRESS}?cors=true`)
                    .then((response) => response.json())
                    .then((balance) => setBtcBalance(balance / 100000000));
                });
              });
            });
          }
        }, []);

        return (
          <>
            <Head>
              <title>Donaciones en Ethereum y Bitcoin</title>
            </Head>
            <h1>Donaciones en Ethereum y Bitcoin</h1>
            <p>
              Dirección de donación de Ethereum: <strong>{ETHEREUM_ADDRESS}</strong>
            </p>
            <p>
              Dirección de donación de Bitcoin: <strong>{BITCOIN_ADDRESS}</strong>
            </p>
            <p>Saldo de ETH: {ethBalance}</p>
            <p>Saldo de BTC: {btcBalance}</p>
          </>
        );
      }

      ReactDOM.render(<HomePage />, document.getElementById('root'));
    </script>
  </body>
</html>
